<div style="background-color : #CCC;">
  <div id="dat0"></div><br>
  <input type="text" id="dat1" placeholder="クッキーに保存する内容を入力して下さい"><br>
  <input type="button" value="クッキー保存" onclick="saveCookie()"><br>
  <input type="button" value="クッキー削除" onclick="delCookie()">
</div>
<br>
<br>
<div style="background-color : #CCC;">
  <div id="dat2"></div><br>
  <input type="text" id="dat3" placeholder="クッキーに保存する内容を入力して下さい"><br>
  <input type="button" value="クッキー保存" onclick="save()"><br>
  <input type="button" value="クッキー削除" onclick="del()">
</div>
<script type="text/javascript">
<!--
window.onload　=　function() {
  var str  = "";
  str += "クッキーで保存されている内容 ： " + getCookie() + "<br>\n";
  document.getElementById("dat0").innerHTML = str;	
}

function getCookie() {
  var cookieStr = document.cookie + ";";
  var startNum = cookieStr.indexOf("cookie_data");
  var txt = "";
  if (startNum != -1){
    var endNum = cookieStr.indexOf(";",startNum);
    txt = unescape(cookieStr.substring(startNum + "cookie_data".length + 1, endNum));
  }
  return txt;
}
  
function saveCookie() {
  //入力内容を取得
  var txt = document.getElementById("dat1").value;
  //日付データを作成
  var day = new Date();
  //クッキーの保存期間として5分後をセット
  day.setTime(day.getTime() + 24*60*60*1000);
  //入力内容と日付データをクッキーへ書き込む
  document.cookie = "cookie_data=" + escape(txt) + ";expires=" + day.toGMTString();
  //ページをリロード
  location.reload();
}
function save {
  //入力内容を取得
  localStorage.removeItem("token");
  var txt = document.getElementById("dat3").value;
  localStorage.setItem('token', txt);
  //ページをリロード
  location.reload();
}

function delCookie()
{
  //日付データを作成
  var day = new Date();
  //過去の日付データ（1970年1月1日00:00:00）をセット
  day.setTime(0);
  //有効期限を過去に設定
  document.cookie = "cookie_data=;expires=" + day.toGMTString();
  //ページをリロード
  location.reload();
}
function del()
{
  localStorage.removeItem("token");
}
//-->
  document.getElementById("dat1").value = getCookie();
</script>

